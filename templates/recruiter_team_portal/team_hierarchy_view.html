{% extends "recruiter_team_portal/recruiter_base.html" %}

{% block recruiter_title %}{{ title }}{% endblock %}

{% block recruiter_page_title_icon %}
<i class="bi bi-person-video3 text-2xl text-primary"></i>
{% endblock %}

{% block recruiter_page_title %}
{{ title }}
{% endblock %}


{% block recruiter_content %}
<!-- Breadcrumbs -->
{% if breadcrumbs %}
<nav class="flex mb-6" aria-label="Breadcrumb">
  <ol role="list" class="flex items-center space-x-4">
    {% for crumb in breadcrumbs %}
    <li>
      <div class="flex items-center">
        {% if not loop.first %}
        <i class="bi bi-chevron-right flex-shrink-0 h-5 w-5 text-text-muted"></i>
        {% endif %}

        {% if crumb.url %}
        <a href="{{ crumb.url }}" class="ml-4 text-sm font-medium text-text-muted hover:text-text">{{ crumb.name }}</a>
        {% else %}
        <span class="ml-4 text-sm font-medium text-text">{{ crumb.name }}</span>
        {% endif %}
      </div>
    </li>
    {% endfor %}
  </ol>
</nav>
{% endif %}

<!-- Team Members List -->
<div class="bg-card shadow-md rounded-lg">
    <div class="p-4 border-b border-border">
        <h3 class="text-lg font-semibold text-heading">Direct Reports for {{ current_leader.FirstName }} {{ current_leader.LastName }}</h3>
    </div>
        <ul role="list" class="divide-y divide-border">
        {% for member in team_members %}
        <li class="p-4 flex items-center justify-between">
            <div class="flex items-center">
                <img class="h-10 w-10 rounded-full object-cover" src="{{ member.ProfilePictureURL or url_for('static', filename='images/default-profile.png') }}" alt="">
                <div class="ml-4">
                    <p class="text-sm font-medium text-text">{{ member.FirstName }} {{ member.LastName }}</p>
                    <p class="text-sm text-text-muted">{{ member.Role }}</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="text-right">
                    <p class="text-sm text-text"><span class="font-bold">{{ member.total_hires or 0 }}</span> Hires</p>
                    <p class="text-xs text-text-muted"><span class="font-bold">{{ member.total_referrals or 0 }}</span> Referrals</p>
                </div>
                {% if member.direct_reports_count > 0 %}
                    <a href="{{ url_for('organization_bp.team_view', leader_staff_id=member.StaffID) }}" class="btn btn-secondary btn-sm">
                        View Team <i class="bi bi-chevron-right"></i>
                    </a>
                {% endif %}
            </div>
        </li>
        {% else %}
        <li class="p-6 text-center text-text-muted">{{ current_leader.FirstName }} has no direct reports to display.</li>
        {% endfor %}
        </ul>
</div>

{% endblock %}