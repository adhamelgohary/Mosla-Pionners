{# templates/client_portal/submit_job_offer_form.html #}
{% extends "client_portal/client_base.html" %} {# Or your client portal base template #}

{% block client_title %}{{ title }}{% endblock %}
{% block client_page_title %}{{ title }}{% endblock %}

{% block client_content %}
<div class="form-container">
    <p>Please fill out the details below to submit a new job offer. Our team will review it shortly.</p>
    <hr>
    <form method="POST" action="{{ url_for('job_offer_mgmt_bp.client_submit_job_offer') }}">
        
        <div class="form-group">
            <label for="title">Job Title <span style="color:red;">*</span></label>
            <input type="text" id="title" name="title" class="{{ 'is-invalid' if errors.get('title') }}" 
                   value="{{ form_data.get('title', '') }}" required>
            {% if errors.get('title') %}<div class="invalid-feedback">{{ errors.get('title') }}</div>{% endif %}
        </div>

        <div class="form-group">
            <label for="description">Job Description <span style="color:red;">*</span></label>
            <textarea id="description" name="description" class="{{ 'is-invalid' if errors.get('description') }}" 
                      rows="5" required>{{ form_data.get('description', '') }}</textarea>
            {% if errors.get('description') %}<div class="invalid-feedback">{{ errors.get('description') }}</div>{% endif %}
        </div>

        <div class="form-group">
            <label for="requirements">Key Requirements <span style="color:red;">*</span></label>
            <textarea id="requirements" name="requirements" class="{{ 'is-invalid' if errors.get('requirements') }}" 
                      rows="5" required>{{ form_data.get('requirements', '') }}</textarea>
            {% if errors.get('requirements') %}<div class="invalid-feedback">{{ errors.get('requirements') }}</div>{% endif %}
        </div>
        
        <div class="form-group">
            <label for="location">Location (e.g., Cairo, Remote, Hybrid)</label>
            <input type="text" id="location" name="location" class="{{ 'is-invalid' if errors.get('location') }}" 
                   value="{{ form_data.get('location', '') }}">
            {% if errors.get('location') %}<div class="invalid-feedback">{{ errors.get('location') }}</div>{% endif %}
        </div>

        <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 0.25rem;">
            <div class="form-group" style="flex: 1; min-width: 150px;">
                <label for="salary_range_min">Minimum Salary (Optional)</label>
                <input type="number" step="0.01" min="0" id="salary_range_min" name="salary_range_min" 
                       class="{{ 'is-invalid' if errors.get('salary_range_min') }}" 
                       value="{{ form_data.get('salary_range_min', '') }}">
                {% if errors.get('salary_range_min') %}<div class="invalid-feedback">{{ errors.get('salary_range_min') }}</div>{% endif %}
            </div>
            <div class="form-group" style="flex: 1; min-width: 150px;">
                <label for="salary_range_max">Maximum Salary (Optional)</label>
                <input type="number" step="0.01" min="0" id="salary_range_max" name="salary_range_max" 
                       class="{{ 'is-invalid' if errors.get('salary_range_max') }}" 
                       value="{{ form_data.get('salary_range_max', '') }}">
                {% if errors.get('salary_range_max') %}<div class="invalid-feedback">{{ errors.get('salary_range_max') }}</div>{% endif %}
            </div>
            <div class="form-group" style="flex: 0.5; min-width: 100px;">
                <label for="currency">Currency</label>
                <input type="text" id="currency" name="currency" class="{{ 'is-invalid' if errors.get('currency') }}" 
                       value="{{ form_data.get('currency', 'EGP') }}" maxlength="10" placeholder="EGP">
                {% if errors.get('currency') %}<div class="invalid-feedback">{{ errors.get('currency') }}</div>{% endif %}
            </div>
        </div>

        <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 0.25rem;">
            <div class="form-group" style="flex: 1; min-width: 200px;">
                <label for="job_type">Job Type</label>
                <input type="text" id="job_type" name="job_type" class="{{ 'is-invalid' if errors.get('job_type') }}" 
                       value="{{ form_data.get('job_type', 'Full-time') }}" placeholder="Full-time, Part-time, Contract">
                {% if errors.get('job_type') %}<div class="invalid-feedback">{{ errors.get('job_type') }}</div>{% endif %}
            </div>
            <div class="form-group" style="flex: 1; min-width: 200px;">
                <label for="category_id">Job Category (Optional)</label>
                <select id="category_id" name="category_id" class="{{ 'is-invalid' if errors.get('category_id') }}">
                    <option value="">Select if known...</option>
                    {% for category in categories %} {# categories passed from route #}
                    <option value="{{ category.CategoryID }}" {% if form_data.get('category_id')|string == category.CategoryID|string %}selected{% endif %}>
                        {{ category.CategoryName }}
                    </option>
                    {% endfor %}
                </select>
                {% if errors.get('category_id') %}<div class="invalid-feedback">{{ errors.get('category_id') }}</div>{% endif %}
            </div>
        </div>
        
        <div class="form-group">
            <label for="client_notes">Additional Notes or Specific Instructions (Optional)</label>
            <textarea id="client_notes" name="client_notes" class="{{ 'is-invalid' if errors.get('client_notes') }}" 
                      rows="3">{{ form_data.get('client_notes', '') }}</textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Submit Offer for Review</button>
            {# Link to client dashboard or previous page #}
            {# <a href="{{ url_for('client_dashboard_bp.dashboard') }}" class="btn btn-secondary">Cancel</a> #}
        </div>
         {% if errors.get('form') %} 
            <div class="alert alert-danger" style="margin-top: 1rem;">{{ errors.get('form') }}</div>
        {% endif %}
    </form>
</div>
{% endblock %}