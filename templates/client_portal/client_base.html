<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title or 'Client Portal' }} - YourAppName</title>
    <!-- Assuming your compiled tailwind css is here -->
    <link rel="stylesheet" href="{{ url_for('static', filename='dist/css/styles.css') }}">
    <!-- Google Font from your config -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    {% block head %}{% endblock %}
</head>
<!-- 
  The .portal-scope class activates the Indigo/Pink theme from your tailwind.config.js.
  The base background and text colors are also applied here.
-->
<body class="portal-scope font-sans bg-background text-text antialiased">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar Navigation -->
        <aside class="w-64 flex-shrink-0 border-r border-border bg-card flex flex-col">
            <div class="h-16 flex items-center justify-center border-b border-border px-4">
                <h1 class="text-xl font-bold text-heading truncate">{{ session.get('client_company_name', 'Client Portal') }}</h1>
            </div>
            <nav class="flex-1 px-4 py-4 space-y-2">
                {% set active_class = 'bg-primary/10 text-primary font-semibold' %}
                {% set inactive_class = 'text-text-muted hover:bg-background hover:text-text' %}
                
                <a href="{{ url_for('client_dashboard_bp.dashboard') }}"
                   class="flex items-center px-3 py-2 rounded-md text-sm transition-colors duration-200 {{ active_class if request.endpoint == 'client_dashboard_bp.dashboard' else inactive_class }}">
                    Dashboard
                </a>
                <a href="{{ url_for('client_offers_bp.submit_offer') }}"
                   class="flex items-center px-3 py-2 rounded-md text-sm transition-colors duration-200 {{ active_class if request.endpoint == 'client_offers_bp.submit_offer' else inactive_class }}">
                    Submit New Offer
                </a>
                <a href="{{ url_for('client_offers_bp.my_submissions') }}"
                   class="flex items-center px-3 py-2 rounded-md text-sm transition-colors duration-200 {{ active_class if 'my_submissions' in request.endpoint or 'view_submission_details' in request.endpoint else inactive_class }}">
                    My Submissions
                </a>
                <a href="{{ url_for('client_offers_bp.pipeline') }}"
                   class="flex items-center px-3 py-2 rounded-md text-sm transition-colors duration-200 {{ active_class if request.endpoint == 'client_offers_bp.pipeline' else inactive_class }}">
                    Candidate Pipeline
                </a>
            </nav>
            <div class="px-4 py-4 border-t border-border">
                <a href="{{ url_for('login_bp.logout') }}" class="w-full text-center block px-3 py-2 rounded-md text-sm bg-danger/10 text-danger-700 hover:bg-danger/20 transition-colors duration-200">
                    Logout
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <div class="container mx-auto px-6 py-8">
                <!-- Page Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-heading">{{ title }}</h1>
                    <p class="text-text-muted">Hello, {{ current_user.FirstName }}!</p>
                </div>

                <!-- Flash Messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div class="mb-6 space-y-3">
                        {% for category, message in messages %}
                            {% set alert_styles = {
                                'danger': 'alert-danger',
                                'success': 'alert-success',
                                'warning': 'alert-warning'
                            } %}
                            {% set alert_class = alert_styles.get(category, 'alert-info') %}
                            <div class="p-4 text-sm rounded-md border 
                                {% if category == 'success' %} bg-alert-success-bg text-alert-success-text border-alert-success-border 
                                {% elif category == 'danger' %} bg-alert-danger-bg text-alert-danger-text border-alert-danger-border
                                {% else %} bg-blue-50 text-blue-700 border-blue-200 {% endif %}">
                                {{ message }}
                            </div>
                        {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}

                <!-- Content Block for child templates -->
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>

    {% block scripts %}{% endblock %}
</body>
</html>