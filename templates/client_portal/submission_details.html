{% extends "client_portal/client_base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto bg-card p-8 rounded-lg shadow">
    {% if submission %}
    <div class="flex justify-between items-start mb-6 pb-4 border-b border-border">
        <div>
            <h2 class="text-2xl font-bold text-heading">{{ submission.Title }}</h2>
            <p class="text-text-muted">{{ submission.CompanyName }} - {{ submission.Location }}</p>
        </div>
        <div>
            {% set status_styles = {
                'Pending': 'bg-yellow-100 text-yellow-800',
                'Approved': 'bg-green-100 text-green-800',
                'Rejected': 'bg-red-100 text-red-800'
            } %}
            <span class="px-3 py-1.5 text-sm font-semibold rounded-full {{ status_styles.get(submission.ReviewStatus, 'bg-gray-100 text-gray-800') }}">
                {{ submission.ReviewStatus }}
            </span>
        </div>
    </div>
    
    <div class="space-y-6">
        <!-- Job Details Section -->
        <div>
            <h3 class="text-lg font-semibold text-heading mb-3">Job Details</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                <div class="flex justify-between border-b border-border/50 py-2"><span class="text-text-muted">Closing Date:</span> <span class="font-medium text-text">{{ submission.ClosingDate.strftime('%Y-%m-%d') if submission.ClosingDate }}</span></div>
                <div class="flex justify-between border-b border-border/50 py-2"><span class="text-text-muted">Candidates Needed:</span> <span class="font-medium text-text">{{ submission.CandidatesNeeded or 'N/A' }}</span></div>
                <div class="flex justify-between border-b border-border/50 py-2"><span class="text-text-muted">Work Location:</span> <span class="font-medium text-text">{{ submission.WorkLocationType or 'N/A' }}</span></div>
                <div class="flex justify-between border-b border-border/50 py-2"><span class="text-text-muted">Net Salary:</span> <span class="font-medium text-text">{{ submission.NetSalary or 'Not specified' }}</span></div>
            </div>
        </div>

        <!-- Candidate Requirements Section -->
        <div>
            <h3 class="text-lg font-semibold text-heading mb-3">Candidate Requirements</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                <div class="flex justify-between border-b border-border/50 py-2"><span class="text-text-muted">Maximum Age:</span> <span class="font-medium text-text">{{ submission.MaxAge or 'Any' }}</span></div>
                <div class="flex justify-between border-b border-border/50 py-2"><span class="text-text-muted">Nationality:</span> <span class="font-medium text-text">{{ submission.Nationality or 'Any' }}</span></div>
                <div class="flex justify-between border-b border-border/50 py-2"><span class="text-text-muted">Graduation Status:</span> <span class="font-medium text-text">{{ submission.GraduationStatusRequirement or 'Any' }}</span></div>
                <div class="flex justify-between border-b border-border/50 py-2"><span class="text-text-muted">English Level:</span> <span class="font-medium text-text">{{ submission.RequiredLevel or 'Any' }}</span></div>
            </div>
        </div>
        
        <!-- Benefits Section -->
        <div>
            <h3 class="text-lg font-semibold text-heading mb-3">Benefits & Shifts</h3>
            <div class="text-sm">
                <div class="py-2"><span class="text-text-muted">Benefits Included:</span>
                    <div class="mt-2 flex flex-wrap gap-2">
                        {% if submission.Benefits_list %}
                            {% for benefit in submission.Benefits_list %}
                                <span class="bg-primary/10 text-primary text-xs font-medium px-2.5 py-1 rounded-full">{{ benefit }}</span>
                            {% endfor %}
                        {% else %}
                            <span class="text-text-muted italic">No specific benefits listed.</span>
                        {% endif %}
                    </div>
                </div>
                 <div class="py-2 mt-2"><span class="text-text-muted">Available Shifts:</span>
                    <div class="mt-2 flex flex-wrap gap-2">
                        {% if submission.AvailableShifts_list %}
                            {% for shift in submission.AvailableShifts_list %}
                                <span class="bg-secondary/10 text-emerald-700 text-xs font-medium px-2.5 py-1 rounded-full">{{ shift }}</span>
                            {% endfor %}
                        {% else %}
                            <span class="text-text-muted italic">No specific shifts listed.</span>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Notes Section -->
        {% if submission.ClientNotes %}
        <div>
            <h3 class="text-lg font-semibold text-heading mb-3">Your Notes</h3>
            <div class="text-sm p-4 bg-background rounded-md text-text-muted whitespace-pre-wrap">
                {{ submission.ClientNotes }}
            </div>
        </div>
        {% endif %}
    </div>

    <div class="mt-8 pt-4 border-t border-border text-right">
        <a href="{{ url_for('.my_submissions') }}" class="btn-secondary">Back to Submissions</a>
    </div>

    {% else %}
    <p>The requested submission could not be found.</p>
    {% endif %}
</div>
{% endblock %}