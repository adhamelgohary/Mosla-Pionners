{% extends "client_portal/client_base.html" %}

{% block content %}
<div class="bg-card shadow rounded-lg overflow-hidden">
    <div class="overflow-x-auto">
        <table class="w-full text-sm text-left text-text-muted">
            <thead class="text-xs text-text uppercase bg-background">
                <tr>
                    <th scope="col" class="px-6 py-3">Job Title</th>
                    <th scope="col" class="px-6 py-3">Status</th>
                    <th scope="col" class="px-6 py-3">Submission Date</th>
                    <th scope="col" class="px-6 py-3">Closing Date</th>
                    <th scope="col" class="px-6 py-3">
                        <span class="sr-only">Actions</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% if submissions %}
                    {% for submission in submissions %}
                    <tr class="bg-card border-b border-border hover:bg-background">
                        <th scope="row" class="px-6 py-4 font-medium text-heading whitespace-nowrap">
                            {{ submission.Title }}
                        </th>
                        <td class="px-6 py-4">
                            {% set status_styles = {
                                'Pending': 'bg-yellow-100 text-yellow-800',
                                'Approved': 'bg-green-100 text-green-800',
                                'Rejected': 'bg-red-100 text-red-800'
                            } %}
                            <span class="px-2 py-1 text-xs font-medium rounded-full {{ status_styles.get(submission.ReviewStatus, 'bg-gray-100 text-gray-800') }}">
                                {{ submission.ReviewStatus }}
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            {{ submission.SubmissionDate.strftime('%Y-%m-%d') if submission.SubmissionDate else 'N/A' }}
                        </td>
                        <td class="px-6 py-4">
                            {{ submission.ClosingDate.strftime('%Y-%m-%d') if submission.ClosingDate else 'N/A' }}
                        </td>
                        <td class="px-6 py-4 text-right">
                            <a href="{{ url_for('.view_submission_details', submission_id=submission.SubmissionID) }}" class="btn-secondary !py-1 !px-2">View Details</a>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5" class="px-6 py-10 text-center">
                            You have not submitted any job offers yet. <a href="{{ url_for('.submit_offer') }}" class="text-primary font-medium hover:underline">Submit one now</a>.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}