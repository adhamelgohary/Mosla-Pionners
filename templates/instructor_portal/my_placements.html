<!-- templates/instructor_portal/my_placements.html -->
{% extends 'instructor_portal/instructor_base.html' %}

{% block portal_title %}{{ title }}{% endblock %}

{% block portal_content %}
<!-- Sample Navigation Bar with the requested style changes -->
<nav class="bg-white shadow mb-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <div class="flex">
                <div class="flex-shrink-0 flex items-center">
                    <!-- Your Logo Here -->
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                    <!-- Current: "border-indigo-500 text-gray-900", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
                    <a href="#" class="inline-flex items-center px-1 pt-1 border-b-2 border-indigo-500 text-sm font-medium text-gray-900">
                        Dashboard
                    </a>
                    <a href="#" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-blue-600 hover:bg-gray-200 hover:border-gray-300">
                        My Placements
                    </a>
                    <a href="#" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-blue-600 hover:bg-gray-200 hover:border-gray-300">
                        Students
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>

<div class="bg-white shadow overflow-hidden sm:rounded-md">
    <div class="px-4 py-5 sm:px-6 bg-gray-50 border-b border-gray-200">
        <h3 class="text-lg leading-6 font-medium text-gray-900">
            My Placed Candidates
        </h3>
        <p class="mt-1 max-w-2xl text-sm text-gray-500">
          A record of all students you have successfully helped get hired.
        </p>
    </div>
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company & Role</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Placement Date</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Commission</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for placement in placements %}
                <!-- This section will be populated once the backend logic is complete -->
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">{{ placement.StudentFirstName }} {{ placement.StudentLastName }}</div>
                        <div class="text-sm text-gray-500">{{ placement.StudentEmail }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">{{ placement.CompanyName }}</div>
                        <div class="text-sm text-gray-500">{{ placement.JobTitle }}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        {{ placement.PlacementDate.strftime('%b %d, %Y') if placement.PlacementDate }}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">EGP {{ "%.2f"|format(placement.CommissionAmount) if placement.CommissionAmount else 'N/A' }}</div>
                        {% set status_colors = {
                            'Pending': 'bg-yellow-100 text-yellow-800',
                            'Paid': 'bg-green-100 text-green-800',
                            'Cancelled': 'bg-red-100 text-red-800'
                        } %}
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full {{ status_colors.get(placement.CommissionStatus, 'bg-gray-100') }}">
                            {{ placement.CommissionStatus }}
                        </span>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="text-center p-6 text-gray-500">
                        <i class="bi bi-trophy text-3xl text-gray-400"></i>
                        <h3 class="mt-2 text-sm font-medium text-gray-900">No Placements Recorded</h3>
                        <p class="mt-1 text-sm text-gray-500">Your successful student placements will appear here.</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}