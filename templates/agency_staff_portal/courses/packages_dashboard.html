{% extends "agency_staff_portal/staff_base.html" %}

{% block staff_title %}{{ title }}{% endblock %}

{% block staff_page_title %}
    <i class="bi bi-grid-1x2-fill"></i> {{ title }}
{% endblock %}

{% block staff_content %}
<div class="space-y-8">
    <!-- ========================================================== -->
    <!-- Comprehensive Navigation / Quick Actions Section -->
    <!-- ========================================================== -->
    <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700">
        <h3 class="text-base font-semibold text-gray-700 dark:text-gray-200 mb-3">Quick Actions & Navigation</h3>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3">
            
            <!-- Application Management -->
            <a href="{{ url_for('group_mgmt_bp.placement_pipeline') }}" class="flex flex-col items-center justify-center text-center p-3 bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700 rounded-lg transition-colors">
                <i class="bi bi-filter-circle-fill text-2xl text-amber-500"></i>
                <span class="text-sm font-semibold text-gray-800 dark:text-gray-200 mt-1">Application Pipeline</span>
                <span class="text-xs text-gray-500 dark:text-gray-400">({{ dashboard_data.pending_applications }} Pending)</span>
            </a>
            <a href="{{ url_for('package_mgmt_bp.manage_approved_enrollments') }}" class="flex flex-col items-center justify-center text-center p-3 bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700 rounded-lg transition-colors">
                <i class="bi bi-check2-circle text-2xl text-green-500"></i>
                <span class="text-sm font-semibold text-gray-800 dark:text-gray-200 mt-1">Approved Enrollments</span>
                <span class="text-xs text-gray-500 dark:text-gray-400">View Active</span>
            </a>

            <!-- Content Management -->
            <a href="{{ url_for('package_mgmt_bp.list_all_packages') }}" class="flex flex-col items-center justify-center text-center p-3 bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700 rounded-lg transition-colors">
                <i class="bi bi-collection-fill text-2xl text-blue-500"></i>
                <span class="text-sm font-semibold text-gray-800 dark:text-gray-200 mt-1">Manage Packages</span>
                <span class="text-xs text-gray-500 dark:text-gray-400">Edit Course Content</span>
            </a>

            <!-- Operations Management -->
            <a href="{{ url_for('group_mgmt_bp.list_groups') }}" class="flex flex-col items-center justify-center text-center p-3 bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700 rounded-lg transition-colors">
                <i class="bi bi-people-fill text-2xl text-teal-500"></i>
                <span class="text-sm font-semibold text-gray-800 dark:text-gray-200 mt-1">Manage Groups</span>
                <span class="text-xs text-gray-500 dark:text-gray-400">Assign Students</span>
            </a>
            <a href="{{ url_for('group_mgmt_bp.list_instructors') }}" class="flex flex-col items-center justify-center text-center p-3 bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700 rounded-lg transition-colors">
                <i class="bi bi-person-video3 text-2xl text-purple-500"></i>
                <span class="text-sm font-semibold text-gray-800 dark:text-gray-200 mt-1">Manage Instructors</span>
                <span class="text-xs text-gray-500 dark:text-gray-400">Add & Edit Staff</span>
            </a>
            
            <a href="{{ url_for('group_mgmt_bp.list_all_placement_tests') }}" class="flex flex-col items-center justify-center text-center p-3 bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700 rounded-lg transition-colors">
                <i class="bi bi-file-earmark-text-fill text-2xl text-red-500"></i>
                <span class="text-sm font-semibold text-gray-800 dark:text-gray-200 mt-1">Placement Tests</span>
                <span class="text-xs text-gray-500 dark:text-gray-400">Oversee All Tests</span>
            </a>
        </div>
    </div>


    <!-- Bento Grid Layout for KPIs -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Main Column -->
        <div class="lg:col-span-2 space-y-6">
            <!-- Large Card: Total Sales Revenue -->
            <div class="bg-white dark:bg-slate-800/50 p-6 rounded-xl shadow-md border border-gray-200 dark:border-slate-700">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Sales Revenue</p>
                        <p class="text-4xl font-bold text-gray-800 dark:text-gray-100 mt-2">{{ "%.2f"|format(dashboard_data.total_sales_revenue) }}</p>
                        <p class="text-sm text-gray-400 dark:text-gray-500">{{ dashboard_data.default_currency }} from confirmed enrollments</p>
                    </div>
                    <div class="bg-primary-100 dark:bg-primary-900/50 text-primary-600 dark:text-primary-400 p-3 rounded-full">
                        <i class="bi bi-cash-stack text-2xl"></i>
                    </div>
                </div>
            </div>

            <!-- Two Smaller Cards in a Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Total Enrolled Students Card -->
                <div class="p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md border border-gray-200 dark:border-slate-700">
                    <div class="flex items-center justify-between">
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Enrolled Students</p>
                        <i class="bi bi-person-video3 text-xl text-blue-400"></i>
                    </div>
                    <p class="text-3xl font-bold text-gray-800 dark:text-gray-100 mt-2">{{ dashboard_data.total_enrolled_students }}</p>
                </div>

                <!-- Ongoing Students Card -->
                <div class="p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md border border-gray-200 dark:border-slate-700">
                    <div class="flex items-center justify-between">
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Students In Progress</p>
                        <i class="bi bi-person-workspace text-xl text-teal-400"></i>
                    </div>
                    <p class="text-3xl font-bold text-gray-800 dark:text-gray-100 mt-2">{{ dashboard_data.ongoing_students }}</p>
                </div>
            </div>
        </div>

        <!-- Sidebar Column -->
        <div class="lg:col-span-1 space-y-6">
            <!-- Pending Applications Card -->
            <a href="{{ url_for('group_mgmt_bp.placement_pipeline') }}" class="block p-6 bg-amber-50 dark:bg-amber-900/40 rounded-xl shadow-md border border-amber-200 dark:border-amber-800 hover:border-amber-400 dark:hover:border-amber-500 transform transition hover:-translate-y-1">
                <div class="flex items-center justify-between">
                    <p class="text-sm font-medium text-amber-700 dark:text-amber-300">Pending Applications</p>
                    <i class="bi bi-clock-history text-xl text-amber-500"></i>
                </div>
                <p class="text-4xl font-bold text-amber-800 dark:text-amber-200 mt-2">{{ dashboard_data.pending_applications }}</p>
                <p class="text-xs text-amber-600 dark:text-amber-400">Awaiting instructor placement</p>
            </a>
            
            <!-- Operations Overview Card -->
            <div class="bg-white dark:bg-slate-800/50 p-6 rounded-xl shadow-md border border-gray-200 dark:border-slate-700 space-y-4 divide-y dark:divide-slate-700">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Active Course Groups</p>
                        <p class="text-2xl font-bold text-gray-800 dark:text-gray-100">{{ dashboard_data.total_groups }}</p>
                    </div>
                    <i class="bi bi-people-fill text-2xl text-gray-400"></i>
                </div>
                <div class="flex items-center justify-between pt-4">
                    <div>
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Active Instructors</p>
                        <p class="text-2xl font-bold text-gray-800 dark:text-gray-100">{{ dashboard_data.total_instructors }}</p>
                    </div>
                    <i class="bi bi-person-video3 text-2xl text-gray-400"></i>
                </div>
                <div class="flex items-center justify-between pt-4">
                    <div>
                        <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Active Packages</p>
                        <p class="text-2xl font-bold text-gray-800 dark:text-gray-100">{{ dashboard_data.active_packages }}</p>
                    </div>
                    <i class="bi bi-box-seam text-2xl text-gray-400"></i>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}