{% extends "agency_staff_portal/staff_base.html" %}

{% block staff_title %}{{ title }}{% endblock %}
{% block staff_page_title %}{{ title }}{% endblock %}


{% block staff_content %}
<div class="dashboard-page-actions">
    {# The .btn class is already defined in portal_styles.css #}
    <a href="{{ url_for('course_mgmt_bp.list_courses') }}" class="btn">Manage All Courses</a>
    <a href="{{ url_for('course_mgmt_bp.add_course') }}" class="btn">Add New Course</a>
</div>

<div class="dashboard-cards-grid">
    
    <div class="dashboard-card sales-card">
        <div class="card-header">
            <h4>Total Sales Revenue</h4>
        </div>
        <div class="card-body">
            <p class="card-value">
                {# Ensure dashboard_data.total_sales_revenue is a Decimal or float #}
                {{ "{:,.2f}".format(dashboard_data.total_sales_revenue if dashboard_data.total_sales_revenue is not none else 0) }}
            </p>
            <p class="card-label">{{ dashboard_data.default_currency }} (from confirmed enrollments)</p>
        </div>
        <div class="card-footer">
            {# <a href="#" class="card-link">View Sales Report</a> #}
        </div>
    </div>

    <div class="dashboard-card courses-card">
        <div class="card-header">
            <h4>Active Courses</h4>
        </div>
        <div class="card-body">
            <p class="card-value">{{ dashboard_data.active_courses|default(0) }}</p>
            <p class="card-label">Currently listed & available</p>
        </div>
        <div class="card-footer">
            <a href="{{ url_for('course_mgmt_bp.list_courses') }}" class="card-link">View All Courses</a>
        </div>
    </div>
    
    <div class="dashboard-card enrollments-card">
        <div class="card-header">
            <h4>Total Enrollments</h4>
        </div>
        <div class="card-body">
            <p class="card-value">{{ dashboard_data.total_enrollments|default(0) }}</p>
            <p class="card-label">Engaged candidates (active/completed)</p>
        </div>
        <div class="card-footer">
            {# <a href="{{ url_for('enrollment_bp.list_enrollments') }}" class="card-link">Manage Enrollments</a> #}
        </div>
    </div>

    <div class="dashboard-card students-card">
        <div class="card-header">
            <h4>Ongoing Students</h4>
        </div>
        <div class="card-body">
            <p class="card-value">{{ dashboard_data.ongoing_students|default(0) }}</p>
            <p class="card-label">Currently in progress</p>
        </div>
        <div class="card-footer">
            {# <a href="{{ url_for('enrollment_bp.list_ongoing_students') }}" class="card-link">View Active Students</a> #}
        </div>
    </div>

    <div class="dashboard-card graduates-card">
        <div class="card-header">
            <h4>Graduated Students</h4>
        </div>
        <div class="card-body">
            <p class="card-value">{{ dashboard_data.graduated_students|default(0) }}</p>
            <p class="card-label">Successfully completed courses</p>
        </div>
        <div class="card-footer">
            {# <a href="{{ url_for('enrollment_bp.list_graduates') }}" class="card-link">View Alumni List</a> #}
        </div>
    </div>
    
    <div class="dashboard-card"> {# Generic card for potential value #}
        <div class="card-header">
            <h4>Potential Course Value</h4>
        </div>
        <div class="card-body">
            <p class="card-value">
                {{ "{:,.2f}".format(dashboard_data.potential_course_value if dashboard_data.potential_course_value is not none else 0) }}
            </p>
            <p class="card-label">{{ dashboard_data.default_currency }} (from all active courses)</p>
        </div>
        <div class="card-footer">
            {# No specific link needed here, or link back to course list #}
        </div>
    </div>

</div>

{% endblock %}