{% extends 'agency_staff_portal/staff_base.html' %}

{% block staff_title %}{{ title }}{% endblock %}

{% block staff_page_title %}
    <i class="bi bi-file-text-fill"></i> {{ offer.Title }}
{% endblock %}

{% block staff_content %}
<div class="bg-white shadow-md rounded-lg overflow-hidden border border-gray-200">
    <div class="px-4 py-5 sm:px-6 flex justify-between items-center border-b">
        <div>
            <h3 class="text-lg leading-6 font-medium text-gray-900">{{ offer.Title }}</h3>
            <p class="mt-1 max-w-2xl text-sm text-gray-500">{{ offer.CompanyName }} - {{ offer.CategoryName or 'Uncategorized' }}</p>
        </div>
        <div class="flex-shrink-0">
             <a href="{{ url_for('.edit_live_job_offer', offer_id=offer.OfferID) }}" class="btn-secondary">
                <i class="bi bi-pencil-square mr-1"></i> Edit Offer
            </a>
        </div>
    </div>
    <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
        <dl class="sm:divide-y sm:divide-gray-200">
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Status</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                     {% set status_colors = {'Open': 'bg-green-100 text-green-800', 'Closed': 'bg-red-100 text-red-800', 'Filled': 'bg-blue-100 text-blue-800', 'On Hold': 'bg-yellow-100 text-yellow-800', 'Draft': 'bg-gray-100 text-gray-800'} %}
                     <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full {{ status_colors.get(offer.Status, 'bg-gray-100 text-gray-800') }}">
                         {{ offer.Status }}
                     </span>
                </dd>
            </div>
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Net Salary</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{ "EGP {:,.2f}".format(offer.NetSalary) if offer.NetSalary else 'Not Specified' }} ({{ offer.PaymentTerm or 'N/A' }})</dd>
            </div>
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Location</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{ offer.Location or 'Not specified' }}</dd>
            </div>
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Work & Shift</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                    {{ 'Work From Home' if offer.WorkLocationType == 'wfh' else 'On-Site' }}, {{ offer.ShiftType|capitalize }} Shift
                    {% if offer.AvailableShifts_list %}
                        <br><span class="text-xs text-gray-500">({{ offer.AvailableShifts_list|join(', ') }})</span>
                    {% endif %}
                </dd>
            </div>
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Candidate Requirements</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                    Graduation: {{ offer.GraduationStatusRequirement|capitalize }}<br>
                    Nationality: {{ offer.Nationality }}<br>
                    Max Age: {{ offer.MaxAge or 'N/A' }}
                </dd>
            </div>
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Languages</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                    {{ offer.LanguagesType }}
                    {% if offer.RequiredLanguages_list %}
                        ({{ offer.RequiredLanguages_list|join(', ') }} at {{ offer.RequiredLevel }} level)
                    {% endif %}
                </dd>
            </div>
             <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Benefits Included</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                    {% if offer.Benefits_list %}
                        <ul class="list-disc list-inside space-y-1">
                        {% for benefit in offer.Benefits_list %}
                            <li>{{ benefit }}</li>
                        {% endfor %}
                        </ul>
                    {% else %}
                        No special benefits listed.
                    {% endif %}
                </dd>
            </div>
        </dl>
    </div>
</div>
{% endblock %}