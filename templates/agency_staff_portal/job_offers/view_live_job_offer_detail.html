{% extends "agency_staff_portal/staff_base.html" %}

{% block staff_title %}{{ title }}{% endblock %}
{% block staff_page_title %}{{ title }}{% endblock %}

{% block head_scripts %}
    {{ super() }}
{% endblock %}

{% block staff_content %}
<div class="detail-view-container">
    {% if offer %}
        <div class="detail-section general-info">
            <h4>{{ offer.Title }}</h4>
            <div class="detail-grid">
                <p><strong>Company:</strong> {{ offer.CompanyName }}</p>
                <p><strong>Status:</strong> <span class="status-badge status-{{ offer.Status | lower | replace(' ', '-') }}">{{ offer.Status }}</span></p>
                <p><strong>Category:</strong> {{ offer.CategoryName or 'N/A' }}</p>
                <p><strong>Candidates Needed:</strong> {{ offer.CandidatesNeeded or 'N/A' }}</p>
            </div>
        </div>

        <div class="detail-section candidate-reqs">
            <h4>Candidate Requirements</h4>
            <div class="detail-grid">
                <p><strong>English Level:</strong> {{ offer.EnglishLevelRequirement or 'N/A' }}</p>
                <p><strong>Graduation Status:</strong> {{ offer.GraduationStatusRequirement | replace('GapYear', 'Gap Year') or 'N/A' }}</p>
                <p><strong>Nationality:</strong> {{ offer.NationalityRequirement or 'Any' }}</p>
            </div>
        </div>

        <div class="detail-section work-conditions">
            <h4>Work Conditions</h4>
            <div class="detail-grid">
                <p><strong>Work Location:</strong> {{ offer.WorkLocationType | replace('WorkFromHome', 'Work From Home') | replace('On-site', 'On-site') }}</p>
                <p><strong>Site Address:</strong> {{ offer.Location or 'N/A' }}</p>
                <p><strong>Schedule:</strong> {{ offer.JobType or 'N/A' }}</p>
                <p><strong>Shift Type:</strong> {{ offer.ShiftType or 'N/A' }}</p>
            </div>
        </div>

        <div class="detail-section package-details">
            <h4>Package & Benefits</h4>
            <div class="detail-grid">
                <p><strong>Net Salary:</strong> {{ offer.NetSalary | currency(offer.Currency) if offer.NetSalary else 'N/A' }}</p>
                <p><strong>Transportation:</strong> {% if offer.IsTransportationProvided %}Yes ({{ offer.TransportationType | replace('DoorToDoor', 'Door to Door') | replace('PickupPoint', 'Pickup Point') }}){% else %}No{% endif %}</p>
                <p><strong>Benefits:</strong>
                     {% if offer.Benefits_list %}
                        {{ offer.Benefits_list | join(', ') | replace('PaidTraining', 'Paid Training') | replace('SocialInsurance', 'Social Insurance') | replace('MedicalInsurance', 'Medical Insurance') }}
                    {% else %}
                        None specified
                    {% endif %}
                </p>
                <p><strong>Featured Offer:</strong> {{ 'Yes' if offer.IsFeatured else 'No' }}</p>
            </div>
        </div>

        <div class="detail-section metadata">
            <h4>Metadata</h4>
            <div class="detail-grid">
                <p><strong>Offer ID:</strong> {{ offer.OfferID }}</p>
                <p><strong>Posted By:</strong> {{ offer.PosterFirstName or 'N/A' }} {{ offer.PosterLastName or '' }}</p>
                <p><strong>Date Posted:</strong> {{ offer.DatePosted | datetime }}</p>
                {% if offer.ClosingDate %}<p><strong>Closing Date:</strong> {{ offer.ClosingDate | date }}</p>{% endif %}
                <p><strong>Last Updated:</strong> {{ offer.UpdatedAt | datetime }}</p>
            </div>
        </div>

        <div class="actions-bar">
            <a href="{{ url_for('job_offer_mgmt_bp.edit_live_job_offer', offer_id=offer.OfferID) }}" class="btn btn-primary">Edit Offer</a>
            <a href="{{ url_for('job_offer_mgmt_bp.list_all_job_offers') }}" class="btn btn-secondary">Back to List</a>
        </div>

    {% else %}
        <div class="alert alert-warning">Job offer details could not be loaded.</div>
    {% endif %}
</div>
{% endblock %}